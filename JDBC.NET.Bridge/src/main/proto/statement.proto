syntax = "proto3";

option csharp_namespace = "JDBC.NET.Proto";

import "google/protobuf/empty.proto";

package proto.statement;

service StatementService {
  rpc createStatement (CreateStatementRequest) returns (CreateStatementResponse);
  rpc executeStatement (ExecuteStatementRequest) returns (ExecuteStatementResponse);
  rpc closeStatement (CloseStatementRequest) returns (google.protobuf.Empty);
}

message CreateStatementRequest {
  string connectionId = 1;
}

message CreateStatementResponse {
  string statementId = 1;
}

message ExecuteStatementRequest {
  string statementId = 1;
  string sql = 2;
}

message ExecuteStatementResponse {
  string resultSetId = 1;
  int32 recordsAffected = 2;
  bool hasRows = 4;
  repeated DataColumn columns = 5;
}

message CloseStatementRequest {
  string statementId = 1;
}

message DataColumn {
  int32 ordinal = 1;
  string name = 2;
  string type = 3;
}
